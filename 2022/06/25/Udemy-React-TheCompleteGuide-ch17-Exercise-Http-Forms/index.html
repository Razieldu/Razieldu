<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Udemy-React-TheCompleteGuide ch17 Exercise-Http-Forms  | Jeremy's Blog</title><meta name="author" content="Jeremy"><meta name="copyright" content="Jeremy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Moving “Meals” Data To The Backend將原來陣列裡面儲存的相關食物資料轉移到 firebase realtime database 上 Fetching Meals via HttpAvailableMeals.js 1234567891011121314151617181920212223242526272829303132333435363738394041424">
<meta property="og:type" content="article">
<meta property="og:title" content="Udemy-React-TheCompleteGuide ch17 Exercise-Http-Forms ">
<meta property="og:url" content="https://razieldu.github.io/2022/06/25/Udemy-React-TheCompleteGuide-ch17-Exercise-Http-Forms/index.html">
<meta property="og:site_name" content="Jeremy&#39;s Blog">
<meta property="og:description" content="Moving “Meals” Data To The Backend將原來陣列裡面儲存的相關食物資料轉移到 firebase realtime database 上 Fetching Meals via HttpAvailableMeals.js 1234567891011121314151617181920212223242526272829303132333435363738394041424">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg">
<meta property="article:published_time" content="2022-06-25T08:32:55.000Z">
<meta property="article:modified_time" content="2022-06-29T02:59:56.838Z">
<meta property="article:author" content="Jeremy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://razieldu.github.io/2022/06/25/Udemy-React-TheCompleteGuide-ch17-Exercise-Http-Forms/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Udemy-React-TheCompleteGuide ch17 Exercise-Http-Forms ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-29 10:59:56'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">83</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jeremy's Blog</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Udemy-React-TheCompleteGuide ch17 Exercise-Http-Forms </h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-06-25T08:32:55.000Z" title="Created 2022-06-25 16:32:55">2022-06-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-06-29T02:59:56.838Z" title="Updated 2022-06-29 10:59:56">2022-06-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/React/">React</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Udemy-React-TheCompleteGuide ch17 Exercise-Http-Forms "><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="Moving-“Meals”-Data-To-The-Backend"><a href="#Moving-“Meals”-Data-To-The-Backend" class="headerlink" title="Moving “Meals” Data To The Backend"></a>Moving “Meals” Data To The Backend</h3><p>將原來陣列裡面儲存的相關食物資料轉移到 firebase realtime database 上</p>
<h3 id="Fetching-Meals-via-Http"><a href="#Fetching-Meals-via-Http" class="headerlink" title="Fetching Meals via Http"></a>Fetching Meals via Http</h3><p><strong>AvailableMeals.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import Card from &quot;../UI/Card&quot;;</span><br><span class="line">import MealItem from &quot;./MealItem/MealItem&quot;;</span><br><span class="line">import &#123; useEffect, useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import classes from &quot;./AvailableMeals.module.css&quot;;</span><br><span class="line"></span><br><span class="line">const AvailableMeals = () =&gt; &#123;</span><br><span class="line">  const [meals, setmeals] = useState([]);////不使用空陣列,下方map()會出錯</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    ////function passed to useEffect should not return a promise,因此設置一個新的fuction</span><br><span class="line">    const fetchMeals = async () =&gt; &#123;</span><br><span class="line">      const response = await fetch(</span><br><span class="line">        &quot;https://react-http-b1446-default-rtdb.firebaseio.com/meal.json&quot; //.json必須添加(firebase路徑表示)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      const responseData = await response.json();</span><br><span class="line">      const loadedMeals = [];</span><br><span class="line">      for (const key in responseData) &#123; ///firebase的資料形式為物件中的物件(object)</span><br><span class="line">        loadedMeals.push(&#123;</span><br><span class="line">          id: key,</span><br><span class="line">          name: responseData[key].name,</span><br><span class="line">          description: responseData[key].description,</span><br><span class="line">          price: responseData[key].price,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      setmeals(loadedMeals);</span><br><span class="line">    &#125;;</span><br><span class="line">    fetchMeals();</span><br><span class="line">  &#125;, []);</span><br><span class="line">  const mealsList = meals.map((meal) =&gt; (</span><br><span class="line">    &lt;MealItem</span><br><span class="line">      key=&#123;meal.id&#125;</span><br><span class="line">      id=&#123;meal.id&#125;</span><br><span class="line">      name=&#123;meal.name&#125;</span><br><span class="line">      description=&#123;meal.description&#125;</span><br><span class="line">      price=&#123;meal.price&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  ));</span><br><span class="line">  return (</span><br><span class="line">    &lt;section className=&#123;classes.meals&#125;&gt;</span><br><span class="line">      &lt;Card&gt;</span><br><span class="line">        &lt;ul&gt;&#123;mealsList&#125;&lt;/ul&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default AvailableMeals;</span><br></pre></td></tr></table></figure>

<h3 id="Handling-the-Loading-State"><a href="#Handling-the-Loading-State" class="headerlink" title="Handling the Loading State"></a>Handling the Loading State</h3><p><strong>AvailableMeals.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import Card from &quot;../UI/Card&quot;;</span><br><span class="line">import MealItem from &quot;./MealItem/MealItem&quot;;</span><br><span class="line">import &#123; useEffect, useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import classes from &quot;./AvailableMeals.module.css&quot;;</span><br><span class="line"></span><br><span class="line">const AvailableMeals = () =&gt; &#123;</span><br><span class="line">  const [meals, setmeals] = useState([]);</span><br><span class="line">  const [isLoading, setIsLoading] = useState(true);</span><br><span class="line">  ///設置loading state,firebase是速度快的資料庫,但是我們無法得知使用者的網速,因此設置loading state</span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    const fetchMeals = async () =&gt; &#123;</span><br><span class="line">      const response = await fetch(</span><br><span class="line">        &quot;https://react-http-b1446-default-rtdb.firebaseio.com/meal.json&quot;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      const responseData = await response.json();</span><br><span class="line">      const loadedMeals = [];</span><br><span class="line">      for (const key in responseData) &#123;</span><br><span class="line">        ///firebase的資料形式為物件中的物件(object)</span><br><span class="line">        loadedMeals.push(&#123;</span><br><span class="line">          id: key,</span><br><span class="line">          name: responseData[key].name,</span><br><span class="line">          description: responseData[key].description,</span><br><span class="line">          price: responseData[key].price,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      setmeals(loadedMeals);</span><br><span class="line">      setIsLoading(false);</span><br><span class="line">    &#125;;</span><br><span class="line">    fetchMeals();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  const mealsList = meals.map((meal) =&gt; (</span><br><span class="line">    &lt;MealItem</span><br><span class="line">      key=&#123;meal.id&#125;</span><br><span class="line">      id=&#123;meal.id&#125;</span><br><span class="line">      name=&#123;meal.name&#125;</span><br><span class="line">      description=&#123;meal.description&#125;</span><br><span class="line">      price=&#123;meal.price&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  ));</span><br><span class="line"></span><br><span class="line">  if (isLoading) &#123; ////設置loading時,要render的畫面</span><br><span class="line">    return (</span><br><span class="line">      &lt;section className=&#123;classes.MealsLoading&#125;&gt;</span><br><span class="line">        &lt;p&gt;Loading...&lt;/p&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;section className=&#123;classes.meals&#125;&gt;</span><br><span class="line">      &lt;Card&gt;</span><br><span class="line">        &lt;ul&gt;&#123;mealsList&#125;&lt;/ul&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default AvailableMeals;</span><br></pre></td></tr></table></figure>

<h3 id="Handling-Errors"><a href="#Handling-Errors" class="headerlink" title="Handling Errors"></a>Handling Errors</h3><p><strong>AvailableMeals.js(錯誤版本)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">import Card from &quot;../UI/Card&quot;;</span><br><span class="line">import MealItem from &quot;./MealItem/MealItem&quot;;</span><br><span class="line">import &#123; useEffect, useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import classes from &quot;./AvailableMeals.module.css&quot;;</span><br><span class="line"></span><br><span class="line">const AvailableMeals = () =&gt; &#123;</span><br><span class="line">  const [meals, setmeals] = useState([]);</span><br><span class="line">  const [isLoading, setIsLoading] = useState(true);</span><br><span class="line">  const [httpError, setHttpError] = useState();</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    const fetchMeals = async () =&gt; &#123;</span><br><span class="line">      const response = await fetch(</span><br><span class="line">        &quot;https://react-http-b1446-default-rtdb.firebaseio.com/meal&quot;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if (!response.ok) &#123;</span><br><span class="line">        throw new Error(&quot;Something went wrong&quot;); ////儲存在messaage.error</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      const responseData = await response.json();</span><br><span class="line">      const loadedMeals = [];</span><br><span class="line">      for (const key in responseData) &#123;</span><br><span class="line">        loadedMeals.push(&#123;</span><br><span class="line">          id: key,</span><br><span class="line">          name: responseData[key].name,</span><br><span class="line">          description: responseData[key].description,</span><br><span class="line">          price: responseData[key].price,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      setmeals(loadedMeals);</span><br><span class="line">      setIsLoading(false);</span><br><span class="line">    &#125;;</span><br><span class="line">    try &#123; ////註解1</span><br><span class="line">      fetchMeals();</span><br><span class="line">    &#125; catch(error) &#123;</span><br><span class="line">      setIsLoading(false);</span><br><span class="line">      setHttpError(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  const mealsList = meals.map((meal) =&gt; (</span><br><span class="line">    &lt;MealItem</span><br><span class="line">      key=&#123;meal.id&#125;</span><br><span class="line">      id=&#123;meal.id&#125;</span><br><span class="line">      name=&#123;meal.name&#125;</span><br><span class="line">      description=&#123;meal.description&#125;</span><br><span class="line">      price=&#123;meal.price&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  ));</span><br><span class="line"></span><br><span class="line">  if (isLoading) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;section className=&#123;classes.MealsLoading&#125;&gt;</span><br><span class="line">        &lt;p&gt;Loading...&lt;/p&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> if(httpError)&#123;</span><br><span class="line"></span><br><span class="line">  return(</span><br><span class="line">    &lt;section className=&#123;classes.MealError&#125;&gt;</span><br><span class="line">    &lt;p&gt;&#123;httpError&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">  )</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;section className=&#123;classes.meals&#125;&gt;</span><br><span class="line">      &lt;Card&gt;</span><br><span class="line">        &lt;ul&gt;&#123;mealsList&#125;&lt;/ul&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default AvailableMeals;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>註解 1:we are using try catch, but fetchMeals is an async function ,therefore it always return a promise,if we throw a errer inside of a promise,that error will cause the error to reject,so we can’t use try catch to wrap it unless we would turn our effect function into an async function,which we are not allowed to do.</p>
<p><strong>AvailableMeals.js(修正版本)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">import Card from &quot;../UI/Card&quot;;</span><br><span class="line">import MealItem from &quot;./MealItem/MealItem&quot;;</span><br><span class="line">import &#123; useEffect, useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import classes from &quot;./AvailableMeals.module.css&quot;;</span><br><span class="line"></span><br><span class="line">const AvailableMeals = () =&gt; &#123;</span><br><span class="line">  const [meals, setmeals] = useState([]);</span><br><span class="line">  const [isLoading, setIsLoading] = useState(true);</span><br><span class="line">  const [httpError, setHttpError] = useState();</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    const fetchMeals = async () =&gt; &#123;</span><br><span class="line">      const response = await fetch(</span><br><span class="line">        &quot;https://react-http-b1446-default-rtdb.firebaseio.com/meal.json&quot;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if (!response.ok) &#123;</span><br><span class="line">        throw new Error(&quot;Something went wrong&quot;); ////儲存在messaage.error</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      const responseData = await response.json();</span><br><span class="line">      const loadedMeals = [];</span><br><span class="line">      for (const key in responseData) &#123;</span><br><span class="line">        ///firebase的資料形式為物件中的物件(object)</span><br><span class="line">        loadedMeals.push(&#123;</span><br><span class="line">          id: key,</span><br><span class="line">          name: responseData[key].name,</span><br><span class="line">          description: responseData[key].description,</span><br><span class="line">          price: responseData[key].price,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      setmeals(loadedMeals);</span><br><span class="line">      setIsLoading(false);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    fetchMeals().catch((error) =&gt; &#123;</span><br><span class="line">      setIsLoading(false);</span><br><span class="line">      setHttpError(error.message);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  const mealsList = meals.map((meal) =&gt; (</span><br><span class="line">    &lt;MealItem</span><br><span class="line">      key=&#123;meal.id&#125;</span><br><span class="line">      id=&#123;meal.id&#125;</span><br><span class="line">      name=&#123;meal.name&#125;</span><br><span class="line">      description=&#123;meal.description&#125;</span><br><span class="line">      price=&#123;meal.price&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  ));</span><br><span class="line"></span><br><span class="line">  if (isLoading) &#123;</span><br><span class="line">    ////設置loading時,要render的畫面</span><br><span class="line">    return (</span><br><span class="line">      &lt;section className=&#123;classes.MealsLoading&#125;&gt;</span><br><span class="line">        &lt;p&gt;Loading...&lt;/p&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (httpError) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;section className=&#123;classes.MealsError&#125;&gt;</span><br><span class="line">        &lt;p&gt;&#123;httpError&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;section className=&#123;classes.meals&#125;&gt;</span><br><span class="line">      &lt;Card&gt;</span><br><span class="line">        &lt;ul&gt;&#123;mealsList&#125;&lt;/ul&gt;</span><br><span class="line">      &lt;/Card&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line">export default AvailableMeals;</span><br></pre></td></tr></table></figure>

<h3 id="Adding-A-Checkout-Form"><a href="#Adding-A-Checkout-Form" class="headerlink" title="Adding A Checkout Form"></a>Adding A Checkout Form</h3><ol>
<li>點擊購物車內的order按鈕之後,出現一個form</li>
<li>點擊form內的 cancel按鈕 關閉購物車</li>
</ol>
<p>新增檔案:<br><strong>checkout.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import classes from &quot;./Checkout.module.css&quot;;</span><br><span class="line"></span><br><span class="line">const Checkout = (props) =&gt; &#123;</span><br><span class="line">  // className=&#123;classes.control&#125;</span><br><span class="line"></span><br><span class="line">  const confirmHandler = (event) =&gt; &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;;</span><br><span class="line">  return (</span><br><span class="line">    &lt;from onSubmit=&#123;confirmHandler&#125;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;label htmlFor=&quot;name&quot;&gt;Your Name&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; id=&quot;name&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;label htmlFor=&quot;street&quot;&gt;Street&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; id=&quot;street&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;label htmlFor=&quot;postal&quot;&gt;Postal Code&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; id=&quot;postal&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;label htmlFor=&quot;city&quot;&gt;City&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; id=&quot;city&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; onClick=&#123;props.onCancel&#125;&gt;</span><br><span class="line">        Cancel</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;button&gt;Confirm&lt;/button&gt;</span><br><span class="line">    &lt;/from&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Checkout;</span><br></pre></td></tr></table></figure>

<p><strong>Cart.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useContext, useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import Modal from &quot;../UI/Modal&quot;;</span><br><span class="line">import CartItem from &quot;./CartItem&quot;;</span><br><span class="line">import classes from &quot;./Cart.module.css&quot;;</span><br><span class="line">import CartContext from &quot;../../store/cart-context&quot;;</span><br><span class="line">import Checkout from &quot;./Checkout&quot;;</span><br><span class="line"></span><br><span class="line">const Cart = (props) =&gt; &#123;</span><br><span class="line">  const [isCheckOut, setIsCheckOut] = useState(false); //點擊order按鈕之後改變state</span><br><span class="line"></span><br><span class="line">  const cartCtx = useContext(CartContext);</span><br><span class="line"></span><br><span class="line">  const totalAmount = `$$&#123;cartCtx.totalAmount.toFixed(2)&#125;`;</span><br><span class="line">  const hasItems = cartCtx.items.length &gt; 0;</span><br><span class="line"></span><br><span class="line">  const cartItemRemoveHandler = (id) =&gt; &#123;</span><br><span class="line">    cartCtx.removeItem(id);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const cartItemAddHandler = (item) =&gt; &#123;</span><br><span class="line">    cartCtx.addItem(item);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const orderHandler = () =&gt; &#123;</span><br><span class="line">    setIsCheckOut(true);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const cartItems = (</span><br><span class="line">    &lt;ul className=&#123;classes[&quot;cart-items&quot;]&#125;&gt;</span><br><span class="line">      &#123;cartCtx.items.map((item) =&gt; (</span><br><span class="line">        &lt;CartItem</span><br><span class="line">          key=&#123;item.id&#125;</span><br><span class="line">          name=&#123;item.name&#125;</span><br><span class="line">          amount=&#123;item.amount&#125;</span><br><span class="line">          price=&#123;item.price&#125;</span><br><span class="line">          onRemove=&#123;cartItemRemoveHandler.bind(null, item.id)&#125;</span><br><span class="line">          onAdd=&#123;cartItemAddHandler.bind(null, item)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      ))&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  const modalActions = ( ///簡化JSX結構</span><br><span class="line">    &lt;div className=&#123;classes.actions&#125;&gt;</span><br><span class="line">      &lt;button className=&#123;classes[&quot;button--alt&quot;]&#125; onClick=&#123;props.onClose&#125; &gt;</span><br><span class="line">        Close</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &#123;hasItems &amp;&amp; (</span><br><span class="line">        &lt;button className=&#123;classes.button&#125; onClick=&#123;orderHandler&#125;&gt;</span><br><span class="line">          Order</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Modal onClose=&#123;props.onClose&#125;&gt;</span><br><span class="line">      &#123;cartItems&#125;</span><br><span class="line">      &lt;div className=&#123;classes.total&#125;&gt;</span><br><span class="line">        &lt;span&gt;Total Amount&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;&#123;totalAmount&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &#123;isCheckOut &amp;&amp; &lt;Checkout onCancel=&#123;props.onClose&#125; /&gt;&#125;  ///置關閉購物車,用state控制出現與否</span><br><span class="line">      &#123;!isCheckOut &amp;&amp; modalActions&#125;</span><br><span class="line">    &lt;/Modal&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Cart;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Reading-Form-Values"><a href="#Reading-Form-Values" class="headerlink" title="Reading Form Values"></a>Reading Form Values</h3><p><strong>Checkout.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useRef, useState &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">import classes from &#x27;./Checkout.module.css&#x27;;</span><br><span class="line"></span><br><span class="line">const isEmpty = (value) =&gt; value.trim() === &#x27;&#x27;; ////協助確認輸入內容</span><br><span class="line">const isFiveChars = (value) =&gt; value.trim().length === 5; ////協助確認輸入內容</span><br><span class="line"></span><br><span class="line">const Checkout = (props) =&gt; &#123;</span><br><span class="line">  const [formInputsValidity, setFormInputsValidity] = useState(&#123;</span><br><span class="line">    name: true,</span><br><span class="line">    street: true,</span><br><span class="line">    city: true,</span><br><span class="line">    postalCode: true,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  const nameInputRef = useRef();</span><br><span class="line">  const streetInputRef = useRef();</span><br><span class="line">  const postalCodeInputRef = useRef();</span><br><span class="line">  const cityInputRef = useRef();</span><br><span class="line"></span><br><span class="line">  const confirmHandler = (event) =&gt; &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line"></span><br><span class="line">    const enteredName = nameInputRef.current.value;</span><br><span class="line">    const enteredStreet = streetInputRef.current.value;</span><br><span class="line">    const enteredPostalCode = postalCodeInputRef.current.value;</span><br><span class="line">    const enteredCity = cityInputRef.current.value;</span><br><span class="line"></span><br><span class="line">    const enteredNameIsValid = !isEmpty(enteredName);</span><br><span class="line">    const enteredStreetIsValid = !isEmpty(enteredStreet);</span><br><span class="line">    const enteredCityIsValid = !isEmpty(enteredCity);</span><br><span class="line">    const enteredPostalCodeIsValid = isFiveChars(enteredPostalCode);</span><br><span class="line">    //把布林值儲存在變數</span><br><span class="line"></span><br><span class="line">    setFormInputsValidity(&#123;     //設置state</span><br><span class="line">      name: enteredNameIsValid,</span><br><span class="line">      street: enteredStreetIsValid,</span><br><span class="line">      city: enteredCityIsValid,</span><br><span class="line">      postalCode: enteredPostalCodeIsValid,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const formIsValid =  ////藉由state來決定formisvalid的值</span><br><span class="line">      enteredNameIsValid &amp;&amp;</span><br><span class="line">      enteredStreetIsValid &amp;&amp;</span><br><span class="line">      enteredCityIsValid &amp;&amp;</span><br><span class="line">      enteredPostalCodeIsValid;</span><br><span class="line"></span><br><span class="line">    if (!formIsValid) &#123; </span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    props.onConfirm(&#123;   ////把值儲存成一個object藉由props往上傳遞</span><br><span class="line">      name: enteredName,</span><br><span class="line">      street: enteredStreet,</span><br><span class="line">      city: enteredCity,</span><br><span class="line">      postalCode: enteredPostalCode,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const nameControlClasses = `$&#123;classes.control&#125; $&#123;   ///設定變數儲存conditonal css</span><br><span class="line">    formInputsValidity.name ? &#x27;&#x27; : classes.invalid</span><br><span class="line">  &#125;`;</span><br><span class="line">  const streetControlClasses = `$&#123;classes.control&#125; $&#123;</span><br><span class="line">    formInputsValidity.street ? &#x27;&#x27; : classes.invalid</span><br><span class="line">  &#125;`;</span><br><span class="line">  const postalCodeControlClasses = `$&#123;classes.control&#125; $&#123;</span><br><span class="line">    formInputsValidity.postalCode ? &#x27;&#x27; : classes.invalid</span><br><span class="line">  &#125;`;</span><br><span class="line">  const cityControlClasses = `$&#123;classes.control&#125; $&#123;</span><br><span class="line">    formInputsValidity.city ? &#x27;&#x27; : classes.invalid</span><br><span class="line">  &#125;`;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;form className=&#123;classes.form&#125; onSubmit=&#123;confirmHandler&#125;&gt;</span><br><span class="line">      &lt;div className=&#123;nameControlClasses&#125;&gt;</span><br><span class="line">        &lt;label htmlFor=&#x27;name&#x27;&gt;Your Name&lt;/label&gt;</span><br><span class="line">        &lt;input type=&#x27;text&#x27; id=&#x27;name&#x27; ref=&#123;nameInputRef&#125; /&gt;</span><br><span class="line">        &#123;!formInputsValidity.name &amp;&amp; &lt;p&gt;Please enter a valid name!&lt;/p&gt;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=&#123;streetControlClasses&#125;&gt;</span><br><span class="line">        &lt;label htmlFor=&#x27;street&#x27;&gt;Street&lt;/label&gt;</span><br><span class="line">        &lt;input type=&#x27;text&#x27; id=&#x27;street&#x27; ref=&#123;streetInputRef&#125; /&gt;</span><br><span class="line">        &#123;!formInputsValidity.street &amp;&amp; &lt;p&gt;Please enter a valid street!&lt;/p&gt;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=&#123;postalCodeControlClasses&#125;&gt;</span><br><span class="line">        &lt;label htmlFor=&#x27;postal&#x27;&gt;Postal Code&lt;/label&gt;</span><br><span class="line">        &lt;input type=&#x27;text&#x27; id=&#x27;postal&#x27; ref=&#123;postalCodeInputRef&#125; /&gt;</span><br><span class="line">        &#123;!formInputsValidity.postalCode &amp;&amp; (</span><br><span class="line">          &lt;p&gt;Please enter a valid postal code (5 characters long)!&lt;/p&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=&#123;cityControlClasses&#125;&gt;</span><br><span class="line">        &lt;label htmlFor=&#x27;city&#x27;&gt;City&lt;/label&gt;</span><br><span class="line">        &lt;input type=&#x27;text&#x27; id=&#x27;city&#x27; ref=&#123;cityInputRef&#125; /&gt;</span><br><span class="line">        &#123;!formInputsValidity.city &amp;&amp; &lt;p&gt;Please enter a valid city!&lt;/p&gt;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=&#123;classes.actions&#125;&gt;</span><br><span class="line">        &lt;button type=&#x27;button&#x27; onClick=&#123;props.onCancel&#125;&gt;</span><br><span class="line">          Cancel</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">        &lt;button className=&#123;classes.submit&#125;&gt;Confirm&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Checkout;</span><br></pre></td></tr></table></figure>


<h3 id="Submitting-amp-Sending-Cart-Data"><a href="#Submitting-amp-Sending-Cart-Data" class="headerlink" title="Submitting &amp; Sending Cart Data"></a>Submitting &amp; Sending Cart Data</h3><p><strong>Cart.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useContext, useState &#125; from &quot;react&quot;;</span><br><span class="line">import Modal from &quot;../UI/Modal&quot;;</span><br><span class="line">import CartItem from &quot;./CartItem&quot;;</span><br><span class="line">import classes from &quot;./Cart.module.css&quot;;</span><br><span class="line">import CartContext from &quot;../../store/cart-context&quot;;</span><br><span class="line">import Checkout from &quot;./Checkout&quot;;</span><br><span class="line"></span><br><span class="line">const Cart = (props) =&gt; &#123;</span><br><span class="line">  const [isCheckout, setIsCheckout] = useState(false);</span><br><span class="line">  const [isSubmitting, setIsSubmitting] = useState(false); ////設置資料傳送中的提示</span><br><span class="line">  const [didSubmit, setDidSubmit] = useState(false);</span><br><span class="line">  const cartCtx = useContext(CartContext);</span><br><span class="line"></span><br><span class="line">  const totalAmount = `$$&#123;cartCtx.totalAmount.toFixed(2)&#125;`;</span><br><span class="line">  const hasItems = cartCtx.items.length &gt; 0;</span><br><span class="line"></span><br><span class="line">  const cartItemRemoveHandler = (id) =&gt; &#123;</span><br><span class="line">    cartCtx.removeItem(id);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const cartItemAddHandler = (item) =&gt; &#123;</span><br><span class="line">    cartCtx.addItem(item);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const orderHandler = () =&gt; &#123;</span><br><span class="line">    setIsCheckout(true);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const submitOrderHandler = async (userData) =&gt; &#123;</span><br><span class="line">    setIsSubmitting(true); ///資料傳送中</span><br><span class="line">    await fetch(</span><br><span class="line">      &quot;https://react-http-b1446-default-rtdb.firebaseio.com/orders.json&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        method: &quot;POST&quot;,</span><br><span class="line">        body: JSON.stringify(&#123;</span><br><span class="line">          user: userData,</span><br><span class="line">          orderedItems: cartCtx.items,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    setIsSubmitting(false); ///資料傳送結束</span><br><span class="line">    setDidSubmit(true);</span><br><span class="line">    cartCtx.clearCart(); ///從useContext上使用清空購物車的function</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const cartItems = (</span><br><span class="line">    &lt;ul className=&#123;classes[&quot;cart-items&quot;]&#125;&gt;</span><br><span class="line">      &#123;cartCtx.items.map((item) =&gt; (</span><br><span class="line">        &lt;CartItem</span><br><span class="line">          key=&#123;item.id&#125;</span><br><span class="line">          name=&#123;item.name&#125;</span><br><span class="line">          amount=&#123;item.amount&#125;</span><br><span class="line">          price=&#123;item.price&#125;</span><br><span class="line">          onRemove=&#123;cartItemRemoveHandler.bind(null, item.id)&#125;</span><br><span class="line">          onAdd=&#123;cartItemAddHandler.bind(null, item)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      ))&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  const modalActions = (</span><br><span class="line">    &lt;div className=&#123;classes.actions&#125;&gt;</span><br><span class="line">      &lt;button className=&#123;classes[&quot;button--alt&quot;]&#125; onClick=&#123;props.onClose&#125;&gt;</span><br><span class="line">        Close</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &#123;hasItems &amp;&amp; (</span><br><span class="line">        &lt;button className=&#123;classes.button&#125; onClick=&#123;orderHandler&#125;&gt;</span><br><span class="line">          Order</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  const cartModalContent = (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &#123;cartItems&#125;</span><br><span class="line">      &lt;div className=&#123;classes.total&#125;&gt;</span><br><span class="line">        &lt;span&gt;Total Amount&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;&#123;totalAmount&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &#123;isCheckout &amp;&amp; (</span><br><span class="line">        &lt;Checkout onConfirm=&#123;submitOrderHandler&#125; onCancel=&#123;props.onClose&#125; /&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">      &#123;!isCheckout &amp;&amp; modalActions&#125;</span><br><span class="line">    &lt;/React.Fragment&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  const isSubmittingModalContent = &lt;p&gt;Sending order data...&lt;/p&gt;;</span><br><span class="line"></span><br><span class="line">  const didSubmitModalContent = (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;p&gt;Successfully sent the order!&lt;/p&gt;</span><br><span class="line">      &lt;div className=&#123;classes.actions&#125;&gt;</span><br><span class="line">        &lt;button className=&#123;classes.button&#125; onClick=&#123;props.onClose&#125;&gt;</span><br><span class="line">          Close</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/React.Fragment&gt;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Modal onClose=&#123;props.onClose&#125;&gt;</span><br><span class="line">      &#123;!isSubmitting &amp;&amp; !didSubmit &amp;&amp; cartModalContent&#125; ///初始JSX code</span><br><span class="line">      &#123;isSubmitting &amp;&amp; isSubmittingModalContent&#125; //正在傳送到資料庫時,呈現的code</span><br><span class="line">      &#123;!isSubmitting &amp;&amp; didSubmit &amp;&amp; didSubmitModalContent&#125;///傳送完成</span><br><span class="line">    &lt;/Modal&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Cart;</span><br></pre></td></tr></table></figure>


<p><strong>CartProvider.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useReducer &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">import CartContext from &#x27;./cart-context&#x27;;</span><br><span class="line"></span><br><span class="line">const defaultCartState = &#123;</span><br><span class="line">  items: [],</span><br><span class="line">  totalAmount: 0,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const cartReducer = (state, action) =&gt; &#123;</span><br><span class="line">  if (action.type === &#x27;ADD&#x27;) &#123;</span><br><span class="line">    const updatedTotalAmount =</span><br><span class="line">      state.totalAmount + action.item.price * action.item.amount;</span><br><span class="line"></span><br><span class="line">    const existingCartItemIndex = state.items.findIndex(</span><br><span class="line">      (item) =&gt; item.id === action.item.id</span><br><span class="line">    );</span><br><span class="line">    const existingCartItem = state.items[existingCartItemIndex];</span><br><span class="line">    let updatedItems;</span><br><span class="line"></span><br><span class="line">    if (existingCartItem) &#123;</span><br><span class="line">      const updatedItem = &#123;</span><br><span class="line">        ...existingCartItem,</span><br><span class="line">        amount: existingCartItem.amount + action.item.amount,</span><br><span class="line">      &#125;;</span><br><span class="line">      updatedItems = [...state.items];</span><br><span class="line">      updatedItems[existingCartItemIndex] = updatedItem;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      updatedItems = state.items.concat(action.item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      items: updatedItems,</span><br><span class="line">      totalAmount: updatedTotalAmount,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  if (action.type === &#x27;REMOVE&#x27;) &#123;</span><br><span class="line">    const existingCartItemIndex = state.items.findIndex(</span><br><span class="line">      (item) =&gt; item.id === action.id</span><br><span class="line">    );</span><br><span class="line">    const existingItem = state.items[existingCartItemIndex];</span><br><span class="line">    const updatedTotalAmount = state.totalAmount - existingItem.price;</span><br><span class="line">    let updatedItems;</span><br><span class="line">    if (existingItem.amount === 1) &#123;</span><br><span class="line">      updatedItems = state.items.filter(item =&gt; item.id !== action.id);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      const updatedItem = &#123; ...existingItem, amount: existingItem.amount - 1 &#125;;</span><br><span class="line">      updatedItems = [...state.items];</span><br><span class="line">      updatedItems[existingCartItemIndex] = updatedItem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      items: updatedItems,</span><br><span class="line">      totalAmount: updatedTotalAmount</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (action.type === &#x27;CLEAR&#x27;) &#123; ////設置清空購物車</span><br><span class="line">    return defaultCartState;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return defaultCartState;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const CartProvider = (props) =&gt; &#123;</span><br><span class="line">  const [cartState, dispatchCartAction] = useReducer(</span><br><span class="line">    cartReducer,</span><br><span class="line">    defaultCartState</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  const addItemToCartHandler = (item) =&gt; &#123;</span><br><span class="line">    dispatchCartAction(&#123; type: &#x27;ADD&#x27;, item: item &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const removeItemFromCartHandler = (id) =&gt; &#123;</span><br><span class="line">    dispatchCartAction(&#123; type: &#x27;REMOVE&#x27;, id: id &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const clearCartHandler = () =&gt; &#123;   ////設置清空的購物車的dispatch fn</span><br><span class="line">    dispatchCartAction(&#123;type: &#x27;CLEAR&#x27;&#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const cartContext = &#123;</span><br><span class="line">    items: cartState.items,</span><br><span class="line">    totalAmount: cartState.totalAmount,</span><br><span class="line">    addItem: addItemToCartHandler,</span><br><span class="line">    removeItem: removeItemFromCartHandler,</span><br><span class="line">    clearCart: clearCartHandler  ////設置清空function在 useContext</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;CartContext.Provider value=&#123;cartContext&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">    &lt;/CartContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default CartProvider;</span><br></pre></td></tr></table></figure>


<p><strong>CartContext.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">const CartContext = React.createContext(&#123;</span><br><span class="line">  items: [],</span><br><span class="line">  totalAmount: 0,</span><br><span class="line">  addItem: (item) =&gt; &#123;&#125;,</span><br><span class="line">  removeItem: (id) =&gt; &#123;&#125;,</span><br><span class="line">  clearCart: () =&gt; &#123;&#125;  ////添加</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default CartContext;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://razieldu.github.io">Jeremy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://razieldu.github.io/2022/06/25/Udemy-React-TheCompleteGuide-ch17-Exercise-Http-Forms/">https://razieldu.github.io/2022/06/25/Udemy-React-TheCompleteGuide-ch17-Exercise-Http-Forms/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/06/28/Udemy-React-TheCompleteGuide-ch18-Redux/"><img class="prev-cover" src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Udemy-React-TheCompleteGuide ch18 Redux </div></div></a></div><div class="next-post pull-right"><a href="/2022/06/23/Udemy-React-TheCompleteGuide-ch16-Working-With-Forms-List/"><img class="next-cover" src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Udemy-React-TheCompleteGuide ch16 Working With Forms and List </div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jeremy</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">83</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Razieldu"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Moving-%E2%80%9CMeals%E2%80%9D-Data-To-The-Backend"><span class="toc-number">1.</span> <span class="toc-text">Moving “Meals” Data To The Backend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fetching-Meals-via-Http"><span class="toc-number">2.</span> <span class="toc-text">Fetching Meals via Http</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Handling-the-Loading-State"><span class="toc-number">3.</span> <span class="toc-text">Handling the Loading State</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Handling-Errors"><span class="toc-number">4.</span> <span class="toc-text">Handling Errors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Adding-A-Checkout-Form"><span class="toc-number">5.</span> <span class="toc-text">Adding A Checkout Form</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reading-Form-Values"><span class="toc-number">6.</span> <span class="toc-text">Reading Form Values</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Submitting-amp-Sending-Cart-Data"><span class="toc-number">7.</span> <span class="toc-text">Submitting &amp; Sending Cart Data</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/10/LeeCode-Richest-Customer-Wealth/" title="LeeCode-Richest-Customer-Wealth"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeeCode-Richest-Customer-Wealth"/></a><div class="content"><a class="title" href="/2022/09/10/LeeCode-Richest-Customer-Wealth/" title="LeeCode-Richest-Customer-Wealth">LeeCode-Richest-Customer-Wealth</a><time datetime="2022-09-10T11:24:06.000Z" title="Created 2022-09-10 19:24:06">2022-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/10/LeeCode-Running-Sum-of-1D-Array/" title="LeeCode-Running-Sum-of-1D-Array"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeeCode-Running-Sum-of-1D-Array"/></a><div class="content"><a class="title" href="/2022/09/10/LeeCode-Running-Sum-of-1D-Array/" title="LeeCode-Running-Sum-of-1D-Array">LeeCode-Running-Sum-of-1D-Array</a><time datetime="2022-09-10T10:51:06.000Z" title="Created 2022-09-10 18:51:06">2022-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/05/LeeCode-Palindrome-Number/" title="LeeCode-Palindrome-Number"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeeCode-Palindrome-Number"/></a><div class="content"><a class="title" href="/2022/09/05/LeeCode-Palindrome-Number/" title="LeeCode-Palindrome-Number">LeeCode-Palindrome-Number</a><time datetime="2022-09-05T08:40:06.000Z" title="Created 2022-09-05 16:40:06">2022-09-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/05/LeeCode-Two-Sum/" title="LeeCode-Two-Sum"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeeCode-Two-Sum"/></a><div class="content"><a class="title" href="/2022/09/05/LeeCode-Two-Sum/" title="LeeCode-Two-Sum">LeeCode-Two-Sum</a><time datetime="2022-09-05T08:40:06.000Z" title="Created 2022-09-05 16:40:06">2022-09-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/30/Material-UI/" title="用Material UI 試做Blog版面 "><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用Material UI 試做Blog版面 "/></a><div class="content"><a class="title" href="/2022/08/30/Material-UI/" title="用Material UI 試做Blog版面 ">用Material UI 試做Blog版面 </a><time datetime="2022-08-30T02:40:06.000Z" title="Created 2022-08-30 10:40:06">2022-08-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Jeremy</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>