<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Udemy Web Development Ch19 Express.js with Node.js | Jeremy's Blog</title><meta name="author" content="Jeremy"><meta name="copyright" content="Jeremy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="What is ExpressExpress is a Node framework,a bunch of code that somebody else wrote,that add extra features and helps to organize and structure your code,expecially for web applications built with Nod">
<meta property="og:type" content="article">
<meta property="og:title" content="Udemy Web Development Ch19 Express.js with Node.js">
<meta property="og:url" content="https://razieldu.github.io/2022/03/15/Udemy-WebDevelopment-ch19-Express.js-with-Node.js/index.html">
<meta property="og:site_name" content="Jeremy&#39;s Blog">
<meta property="og:description" content="What is ExpressExpress is a Node framework,a bunch of code that somebody else wrote,that add extra features and helps to organize and structure your code,expecially for web applications built with Nod">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg">
<meta property="article:published_time" content="2022-03-15T11:29:42.000Z">
<meta property="article:modified_time" content="2022-04-28T04:50:18.295Z">
<meta property="article:author" content="Jeremy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://razieldu.github.io/2022/03/15/Udemy-WebDevelopment-ch19-Express.js-with-Node.js/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Udemy Web Development Ch19 Express.js with Node.js',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-04-28 12:50:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jeremy's Blog</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Udemy Web Development Ch19 Express.js with Node.js</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-03-15T11:29:42.000Z" title="Created 2022-03-15 19:29:42">2022-03-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-04-28T04:50:18.295Z" title="Updated 2022-04-28 12:50:18">2022-04-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web-development/">Web development</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Udemy Web Development Ch19 Express.js with Node.js"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="What-is-Express"><a href="#What-is-Express" class="headerlink" title="What is Express"></a>What is Express</h3><p>Express is a Node framework,a bunch of code that somebody else wrote,that add extra features and helps to organize and structure your code,expecially for web applications built with Node,it will make you write less repetitive code when you are building web applicatons, it is made specifically for web developers</p>
<h3 id="Creating-our-first-server-with-Express"><a href="#Creating-our-first-server-with-Express" class="headerlink" title="Creating our first server with Express"></a>Creating our first server with Express</h3><ol>
<li>使用hyper terminal 前往桌面: cd desktop 建立一個資料夾: mkdir my-express-server</li>
<li>cd my-express-server </li>
<li>touch index.js</li>
<li>npm init</li>
<li>在hyper terminal 確認目前位置為 my-express-server,atom .  使用atom開啟此資料夾</li>
<li>在hyper terminal  安裝Express : npm install exrpess</li>
<li>Express 官網,點擊getting started ,點擊Hello World,查看安裝程式碼</li>
<li>在server.js輸入以下程式碼</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.listen(3000); </span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;this tells it to listen to a specific port for any HTTP requests that get sent to our server,and this is the bare bones of a express server<br>A port is basically just a channel that we have tuned our server to.</p>
<ol start="9">
<li>hyper terminal 輸入: node server.js,沒有特別的事情發生</li>
<li>ctra + C 關閉我們的伺服器</li>
</ol>
<p>If we want to be able to see when our port is set up and when our server is running ,we can add a callback function to this method listen.</p>
<p>how to do:we can add an anonymous function,and we are going to callback using a console.log(“Server started on port 3000”)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">  console.log(&quot;Server started on port 3000&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>此時在瀏覽器輸入:localhost:3000,顯示:Cannot GET &#x2F; ,it means that when our browser is trying to get in touch with our server on the port 3000,it is not able to get anything back,so we have to figure out how can we write some code so that our server responds when a browser is making a request to our server,we have to sent the browser some information in order to display</p>
<h3 id="Handling-Request-and-Response-the-Get-Request"><a href="#Handling-Request-and-Response-the-Get-Request" class="headerlink" title="Handling Request and Response:the Get Request"></a>Handling Request and Response:the Get Request</h3><p>在app.listen上方新增一行程式碼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;, function(request,respose)&#123;</span><br><span class="line">  console.log(request);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">  console.log(&quot;Server started on port 3000&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.get(&quot;/&quot;, function(request,respose)&#123;</span><br><span class="line">  console.log(request);</span><br></pre></td></tr></table></figure>

<p>This ia a method that is <strong>provided by Express that allow us to specify what should happened when a browser get in touch with our server and makes a get request</strong>. The first parameter it takes is the location of the get request,so when we type localhost:3000,the get request is being sent to the route of our web site,which is represented by a forward slash “&#x2F;“,this is basically our home page.When that get request happens ,we can trigger a callback function ,and this callback function can have two parameters:request and response.</p>
<p>匿名方程式第一個變數request的說明</p>
<p>So this method app.get ,defines what should happen when someone makes a get request to the home route,that is the first parameter.</p>
<p>And there is a callback function that tells the server what to do when that request happens.</p>
<p>Let us print out this request object that we get when the callback gets triggered and see what happen </p>
<p>在終端機輸入: node server.js,進行測試</p>
<p>匿名方程式第二個變數respose的說明</p>
<p>This is the response that our server can make when the request gets triggered at this home location</p>
<p>In fact ,Chrome actually tells you that localhost did not send any data,it is got an empty response,so let us actually give it a response.so we can tap into the response object,and we can use the second method.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;, function(request,respose)&#123;</span><br><span class="line">  respose.send(&quot;Hello&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">  console.log(&quot;Server started on port 3000&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>終端機輸入:node server.js</p>
<p><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E7%B6%B2%E9%A0%81%E9%96%8B%E7%99%BC%E7%AC%AC19%E7%AF%80%20server-response.png" alt="網頁開發第19節 server-response.png"></p>
<p>This is because when we type in localhost:3000,we specified a location of a server,and when we hit enter ,the browser will go to that location and make a request to get some data back,and when that request gets made at that home location,then this callback function gets triggered,and we send the browser a response,which is just the plain text of “Hello”.Now that get send back to our browser and it render it on screen.</p>
<p>send.response(也可以使用h1) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;, function(request,respose)&#123;</span><br><span class="line">  respose.send(&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">  console.log(&quot;Server started on port 3000&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>可以使用req代表:request,使用res代表:response</p>
<h3 id="Understanding-and-Working-with-Routes"><a href="#Understanding-and-Working-with-Routes" class="headerlink" title="Understanding and Working with Routes"></a>Understanding and Working with Routes</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&quot;/&quot;, function(request,respose)&#123;</span><br><span class="line">  respose.send(&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>This first parameter specifies the route that we are going to respond to ,so that means when we get a get request from a browser that is targeting this route , which is the home route,then we are going to respond this callback</p>
<h3 id="Respond-to-different-routes"><a href="#Respond-to-different-routes" class="headerlink" title="Respond to different routes"></a>Respond to different routes</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.get(&quot;/&quot;, function(req,res)&#123;</span><br><span class="line">  res.send(&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&quot;/contact&quot;,function(req,res)&#123;</span><br><span class="line">  res.send(&quot;Contact me at:Jeremy@gamil.com&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">//</span><br><span class="line">It is kind of saying like what if somebody tried to go to our home page,we are going to respond with this:res.send(&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;);</span><br><span class="line"></span><br><span class="line">What if somebody tried to go to the contact page,well then in that case we will respond with this:res.send(&quot;Contact me at:Jeremy@gmail.com&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E7%B6%B2%E9%A0%81%E9%96%8B%E7%99%BC19%E7%AF%80%20%E5%88%86%E9%A0%81%E9%9D%A2response.png" alt="網頁開發第19節 server-分頁response.png"></p>
<p>輸入網址:localhost:3000&#x2F;contact 看到的畫面</p>
<h3 id="再新增一個about-page"><a href="#再新增一個about-page" class="headerlink" title="再新增一個about page"></a>再新增一個about page</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app= express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;, function(req,res)&#123;</span><br><span class="line">  res.send(&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&quot;/contact&quot;,function(req,res)&#123;</span><br><span class="line">  res.send(&quot;Contact me at :Jeremy@gmail.com&quot;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&quot;/about&quot;,function(rep,res)&#123;</span><br><span class="line">  res.send(&quot;I am a beginner of program,and I am going to learn and improve my skills.&quot;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">  console.log(&quot;Server started on port 3000&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Nodemon"><a href="#Nodemon" class="headerlink" title="Nodemon"></a>Nodemon</h3><p>個人的伺服器要一直開啟關閉進行測試,更方便的方法?</p>
<p><a target="_blank" rel="noopener" href="https://nodemon.io/">https://nodemon.io/</a></p>
<p>This is a utility that you can install using NPM that will monitor for changes in your source code,and it will automatically restart your server when it detects any changes in your code</p>
<h3 id="安裝Nodemon"><a href="#安裝Nodemon" class="headerlink" title="安裝Nodemon"></a>安裝Nodemon</h3><p>在hyper terminal </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon</span><br></pre></td></tr></table></figure>
<p>Then we can go to the location where our server.js resides,which happens to my-express-server(前往my-express-server)</p>
<p>在hyper terminal </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodemon server.js</span><br></pre></td></tr></table></figure>
<p>hit enter and Nodemon activates,and it will start monitoring changes</p>
<p>server.js檔案更新並存檔之後Nodemon會自動重新啟動伺服器</p>
<h3 id="Calculator-setup-challenge"><a href="#Calculator-setup-challenge" class="headerlink" title="Calculator setup challenge"></a>Calculator setup challenge</h3><p>We are going to make our code run server side,so when our web site makes a request to our server,it is going to execute the code and only deliver the outcome back to the user,so the user does not get to see any of the code and logic of our calculator,it is all done on our server.Once we grasp this concept ,then we will be able to make much faster,more complex web sites that can do computation before it even renders the web site to be delivered to the user,and we will be able to interact with databases ,and query,and search,and manipulate our databases ,and create much more interesting web applications.</p>
<ol>
<li><p>Make a new folder called Calculator on your Desktop</p>
</li>
<li><p>Change Directory to this new folder</p>
</li>
<li><p>Inside the Calculator folder, create a new file called calculator.js</p>
</li>
<li><p>Set up a new NPM package</p>
</li>
<li><p>Open the project folder in Atom </p>
</li>
<li><p>Using NPM install the express module</p>
</li>
<li><p>Require express in your calculator.js</p>
</li>
<li><p>Setup express</p>
</li>
<li><p>Create a root route get method with app.get()</p>
</li>
<li><p>Send the words Hello World from the root route as the response</p>
</li>
<li><p>Spin up our server on port 3000 with app.listen</p>
</li>
<li><p>Run server with nodemon</p>
</li>
</ol>
<p>Something is not defined ,and this is one of the common thing that happens when you mispell,or you make a typo(打字排印錯誤),or you forgot to make a paticular word capitalized when it should be ,then it will say something is not defined.This just means it does not know what you are talking about. </p>
<h3 id="Responding-to-Request-with-HTML-Files"><a href="#Responding-to-Request-with-HTML-Files" class="headerlink" title="Responding to Request with HTML Files"></a>Responding to Request with HTML Files</h3><ol>
<li>在 Calculator 資料夾建立一個index.html</li>
<li>在index.html body的部分新增一個form</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Calculator&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;form  action=&quot;index.html&quot; method=&quot;post&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n1&quot; placeholder=&quot;First Number&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n2&quot; placeholder=&quot;Second Number&quot;&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;Calculate&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; form裡面的name:This names is going to be equivalent to like a variable name,and it is going to be the thing that uniquely indetifies the data that is inside the input,that is what we are going to be using and drawing on to to perform our calculation<br>&#x2F;&#x2F; form裡面的type,必須要是submit,because it is going to trigger the post request of the form<br>2. Now that we have created our buttons and our form,we are going to <strong>send this entire index.html file</strong> when the browser tries to access the home route</p>
<p>.sendFile(path)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> console.log(__dirname);</span><br><span class="line"></span><br><span class="line">顯示: C:\Users\ASUS VIVO BOOK\desktop\calculator</span><br></pre></td></tr></table></figure>



<p>index.html的部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Calculator&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;h1&gt;Calculator&lt;/h1&gt;</span><br><span class="line">  &lt;form  action=&quot;index.html&quot; method=&quot;post&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n1&quot; placeholder=&quot;First Number&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n2&quot; placeholder=&quot;Second Number&quot;&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;Calculate&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>calculator.js的部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>__dirname,it is <strong>two</strong> underscores and this is going to give you the file path of the current file no matter it is hosted,on somebody else’s computer,in the cloud,in a remote server,whatever it may be.It is basically just a constant that allow us to grab hold of the current file location at any given time,so we can use that location and append the lacation of another file to it.This is mean that<br>it does not matterif we are on any server,we do not have to know this file resides.</p>
<h3 id="Processing-Post-Request-with-Body-Parser"><a href="#Processing-Post-Request-with-Body-Parser" class="headerlink" title="Processing Post Request with Body Parser"></a>Processing Post Request with Body Parser</h3><p>此時開啟伺服器,前往localhost:3000,在兩個input的位子輸入數字並點擊calculate button,會出現404錯誤,頁面顯示:Cannot POST &#x2F;index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form  action=&quot;index.html&quot; method=&quot;post&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n1&quot; placeholder=&quot;First Number&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n2&quot; placeholder=&quot;Second Number&quot;&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;Calculate&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>Our form has an action and a method,now the method is a post method,so we are sending this data somewhere,and that somewhere is what defined by the action attribute.So,we are sending it to something called index.html,which is not what we want. We want to send it to our server,which is at the home route location,so it is just the forward slash</p>
<p>改為</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form  action=&quot;/&quot; method=&quot;post&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n1&quot; placeholder=&quot;First Number&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;n2&quot; placeholder=&quot;Second Number&quot;&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;Calculate&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>如果沒有action attribute也沒有關係,by default,the form will simply send the data to the current page where it is on.</p>
<p>so our form has a post method ,which means it is going to try and send the data that is entered into the inputs to a location that is our home route</p>
<p>此時前往localhost:3000,出現錯誤:Cannot POST &#x2F; 開發人員控制台顯示:404 not found</p>
<p>The problem is that our server does not have a way of processing any post request,so we are basically not accepting anybody to post to our home route.</p>
<p>修正</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.send(&quot;Thanks for posting that&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在localhost:3000輸入數字之後calculate,顯示:Thanks for posting that </p>
<p>But how do we tap into these piece of form data? Because that is essentially what we need,we need to be able to get that data into here,into this callback function ,so we can calculate the output,and send the result back to the browser.<br>In order to tap into these piece of data,we have to install another NPM package,which is called <strong>Body Parser</strong></p>
<p>hyper terminal </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser</span><br></pre></td></tr></table></figure>

<p>What this is gping to do is that it is going to allow us to pass the information that we get from the post request.</p>
<p>把body-parser加入專案</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line"></span><br><span class="line">app.use(bodyParser);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.send(&quot;Thanks for posting that&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Body parser has a few modes,for example</p>
<p>bodyParser.text()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(bodyParser.text());//parse all the request into text</span><br></pre></td></tr></table></figure>

<p>bodyParser.json()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(bodyParser.json());</span><br></pre></td></tr></table></figure>

<p>bodyParser.urlencoded()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(bodyParser.urlencoded());</span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;This is the special one that we use when we are trying to parse data that comes from an HTML form,whenever you are trying to grab the information that gets posted to your server from an HTML form ,you are going to be using urlencoded.</p>
<p>In addition to do that ,we are going to add an option called “extended”,and we are going to set it to be “true”</p>
<p>改為</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:true&#125;));</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.send(&quot;Thanks for posting that&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>By sending that extended option to true,that bascally just allow us to post nested objects.And it is not something that we are going to be using ,but it is something that bodyParser is requiring you to explicitly(明確地) declare.</p>
<p>Why would you want to use bodyParser?</p>
<p>It allows you to go into any of your routes,and you can tap into something  called <strong>request.body</strong>,and this is the parsed version of the HTTP request.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:true&#125;));</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> console.log(req.body);</span><br><span class="line"> res.send(&quot;Thanks for your post &quot;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>We get send back”thanks for your post” from the res.send,but we also execute the console.log,where we log the request.body,and that logs in here as everything </p>
<p>終端機顯示:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; n1: &#x27;2&#x27;, n2: &#x27;3&#x27;, submit: &#x27;&#x27; &#125;</span><br></pre></td></tr></table></figure>
<p>so,by using body parser we are able to parse the HTTP request that we get ,and by using urlencoded we can get access to the form data ,and we can then tap into each of these:{ n1: ‘2’, n2: ‘3’, submit: ‘’ },as if they were just properties of the object body.</p>
<p>So we can, for example,log request.body.n1. And remember that naming comes from the name attribute of your input</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:true&#125;));</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> console.log(req.body.n1);</span><br><span class="line"> res.send(&quot;Thanks for your post &quot;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>輸入數字後,終端機顯示:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node calculator.js</span><br><span class="line">Server is running on port 3000.</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p>so that values gets stored inside request.body.n1,so now that we know how we can tap into these values,then making our calculator is super simple</p>
<p>改為</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:true&#125;));</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line">var num1= req.body.n1;</span><br><span class="line">var num2= req.body.n2;</span><br><span class="line">var result=num1 + num2;</span><br><span class="line"> res.send(&quot;The result of the calculation is&quot;+ result)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>首頁輸入:2 以及 3<br>終端機顯示:23</p>
<p>because  this num1 and num2 that we are getting  back from bodyParser,it get parsed as text,使用Number(),轉換成數字型態</p>
<p>改為</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const express= require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line"></span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:true&#125;));</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line"> res.sendFile(__dirname + &quot;/index.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line">var num1= Number(req.body.n1);</span><br><span class="line">var num2= Number(req.body.n2);</span><br><span class="line">var result=num1 + num2;</span><br><span class="line"> res.send(&quot;The result of the calculation is &quot;+ result)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">console.log(&quot;Server is running on port 3000.&quot;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>body: is everything that we got after we parsed the request<br>n1:is the value of the item in the form that has a name of n1<br>瀏覽器頁面只能看到簡單的HTML程式碼,因為是使用後端來開發</p>
<h3 id="BMI-calculator練習"><a href="#BMI-calculator練習" class="headerlink" title="BMI calculator練習"></a>BMI calculator練習</h3><p>bmicalculator.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;BMI Calculator&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;BMI Calculator&lt;/h1&gt;</span><br><span class="line">    &lt;form  action=&quot;/&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; name=&quot;height&quot; placeholder=&quot;your height(meter)&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; name=&quot;weight&quot; placeholder=&quot;your weight(kg)&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;Calculate BMI&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>bmiserver.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const express=require(&quot;express&quot;);</span><br><span class="line">const bodyParser=require(&quot;body-parser&quot;);</span><br><span class="line">const app=express();</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:true&#125;));</span><br><span class="line"></span><br><span class="line">app.post(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line">  var userHeight=Number(req.body.height);</span><br><span class="line">  var userWeight=Number(req.body.weight);</span><br><span class="line">  var result=Math.round(userWeight/Math.pow(userHeight,2));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  res.send(&quot;Your BMI is &quot;+ result);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&quot;/&quot;,function(req,res)&#123;</span><br><span class="line">res.sendFile(__dirname + &quot;/bmicalculator.html&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000,function()&#123;</span><br><span class="line">  console.log(&quot;Server is started on port 3000!&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h3 id="問題"><a href="#問題" class="headerlink" title="問題"></a>問題</h3><p>~~<br>RangeError [ERR_HTTP_INVALID_STATUS_CODE]: Invalid status code: 23</p>
<pre><code>如果只回傳res.send(result)會出現錯誤,但是回傳res.send(&quot;The result of the calculation is &quot;+ result),就不會有問題

send()中的參數如果為数字，會默認狀態碼，當傳的數值不存在狀態碼中，會報無效狀態碼的錯誤
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://razieldu.github.io">Jeremy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://razieldu.github.io/2022/03/15/Udemy-WebDevelopment-ch19-Express.js-with-Node.js/">https://razieldu.github.io/2022/03/15/Udemy-WebDevelopment-ch19-Express.js-with-Node.js/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/17/Udemy-WebDevelopment-ch20-1-APIs-Application-Programming-Interfaces/"><img class="prev-cover" src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Udemy Web Development Ch20-1 APIs Application Programming Interfaces</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/14/Udemy-WebDevelopment-ch18-Node.js/"><img class="next-cover" src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Udemy Web Development Ch18 Node.js</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jeremy</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Razieldu"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-Express"><span class="toc-number">1.</span> <span class="toc-text">What is Express</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-our-first-server-with-Express"><span class="toc-number">2.</span> <span class="toc-text">Creating our first server with Express</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Handling-Request-and-Response-the-Get-Request"><span class="toc-number">3.</span> <span class="toc-text">Handling Request and Response:the Get Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Understanding-and-Working-with-Routes"><span class="toc-number">4.</span> <span class="toc-text">Understanding and Working with Routes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Respond-to-different-routes"><span class="toc-number">5.</span> <span class="toc-text">Respond to different routes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%8D%E6%96%B0%E5%A2%9E%E4%B8%80%E5%80%8Babout-page"><span class="toc-number">6.</span> <span class="toc-text">再新增一個about page</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nodemon"><span class="toc-number">7.</span> <span class="toc-text">Nodemon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%9DNodemon"><span class="toc-number">8.</span> <span class="toc-text">安裝Nodemon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Calculator-setup-challenge"><span class="toc-number">9.</span> <span class="toc-text">Calculator setup challenge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Responding-to-Request-with-HTML-Files"><span class="toc-number">10.</span> <span class="toc-text">Responding to Request with HTML Files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Processing-Post-Request-with-Body-Parser"><span class="toc-number">11.</span> <span class="toc-text">Processing Post Request with Body Parser</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BMI-calculator%E7%B7%B4%E7%BF%92"><span class="toc-number">12.</span> <span class="toc-text">BMI calculator練習</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%95%8F%E9%A1%8C"><span class="toc-number">13.</span> <span class="toc-text">問題</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/05/18/Udemy-React-TheCompleteGuide-ch5-Rendering-List-And-Conditional-Content/" title="Udemy React TheCompleteGuide ch5 React Basics and Working With Events"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Udemy React TheCompleteGuide ch5 React Basics and Working With Events"/></a><div class="content"><a class="title" href="/2022/05/18/Udemy-React-TheCompleteGuide-ch5-Rendering-List-And-Conditional-Content/" title="Udemy React TheCompleteGuide ch5 React Basics and Working With Events">Udemy React TheCompleteGuide ch5 React Basics and Working With Events</a><time datetime="2022-05-18T15:17:55.000Z" title="Created 2022-05-18 23:17:55">2022-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/16/Udemy-React-TheCompleteGuide-ch4-React-State-And-Working-With-Events/" title="Udemy React TheCompleteGuide ch4 React Basics and Working With Events"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Udemy React TheCompleteGuide ch4 React Basics and Working With Events"/></a><div class="content"><a class="title" href="/2022/05/16/Udemy-React-TheCompleteGuide-ch4-React-State-And-Working-With-Events/" title="Udemy React TheCompleteGuide ch4 React Basics and Working With Events">Udemy React TheCompleteGuide ch4 React Basics and Working With Events</a><time datetime="2022-05-16T15:17:55.000Z" title="Created 2022-05-16 23:17:55">2022-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/07/Udemy-React-TheCompleteGuide-ch3-React-Basics-Working-With-Components/" title="Udemy React TheCompleteGuide ch3 React Basics Working With Components"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Udemy React TheCompleteGuide ch3 React Basics Working With Components"/></a><div class="content"><a class="title" href="/2022/05/07/Udemy-React-TheCompleteGuide-ch3-React-Basics-Working-With-Components/" title="Udemy React TheCompleteGuide ch3 React Basics Working With Components">Udemy React TheCompleteGuide ch3 React Basics Working With Components</a><time datetime="2022-05-07T07:39:55.000Z" title="Created 2022-05-07 15:39:55">2022-05-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/06/Udemy-WebDevelopment-ch34-Web3-Decentralised-App-Development-with-Intermet-computer/" title="Udemy-WebDevelopment ch34 Web3 Decentralised App Development with Intermet computer"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Udemy-WebDevelopment ch34 Web3 Decentralised App Development with Intermet computer"/></a><div class="content"><a class="title" href="/2022/05/06/Udemy-WebDevelopment-ch34-Web3-Decentralised-App-Development-with-Intermet-computer/" title="Udemy-WebDevelopment ch34 Web3 Decentralised App Development with Intermet computer">Udemy-WebDevelopment ch34 Web3 Decentralised App Development with Intermet computer</a><time datetime="2022-05-06T07:01:44.000Z" title="Created 2022-05-06 15:01:44">2022-05-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/04/%E9%9B%BB%E8%85%A6%E8%A8%AD%E5%AE%9ASSH%E4%BD%BF%E7%94%A8%E5%A4%9A%E5%80%8BGit%E5%B8%B3%E8%99%9F/" title="一台電腦設定SSH使用多個Github帳號"><img src="https://github.com/Razieldu/BLOG-IMG/raw/main/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%9C%96%E7%89%87.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一台電腦設定SSH使用多個Github帳號"/></a><div class="content"><a class="title" href="/2022/05/04/%E9%9B%BB%E8%85%A6%E8%A8%AD%E5%AE%9ASSH%E4%BD%BF%E7%94%A8%E5%A4%9A%E5%80%8BGit%E5%B8%B3%E8%99%9F/" title="一台電腦設定SSH使用多個Github帳號">一台電腦設定SSH使用多個Github帳號</a><time datetime="2022-05-04T10:00:21.000Z" title="Created 2022-05-04 18:00:21">2022-05-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Jeremy</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>